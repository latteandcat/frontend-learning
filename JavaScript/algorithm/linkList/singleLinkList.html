<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    class SingleLinkNode {
      constructor(value, next) {
        this.value = value ?? 0
        this.next = next ?? null
      }
    }

    class SingleLinkList {
      constructor() {
        this._head = null
      }
      
      isEmpty() {
        return this._head === null
      }
      
      get length() {
        if (this.isEmpty()) return 0
        let cur = this._head
        let count = 0
        while (cur !== null) {
          count += 1
          cur = cur.next
        }
        return count
      }
      
      travel() {
        if (this.isEmpty()) return
        let cur = this._head
        while (cur !== null) {
          console.log(cur.value)
          cur = cur.next
        }
      }
      
      addNode(nodeValue) {
        const newNode = new SingleLinkNode(nodeValue)
        newNode.next = this._head
        this._head = newNode
      }
      
      appendNode(nodeValue) {
        const newNode = new SingleLinkNode(nodeValue)
        if (this.isEmpty()) {
          this._head = newNode
        } else {
          let cur = this._head
          while (cur.next !== null) {
            cur = cur.next
          }
          // 此时 cur 为尾节点
          cur.next = newNode
        }
      }
      
      insertNode(insertPos, nodeValue) {
        if (this.isEmpty() || insertPos <=0) {
          this.addNode(nodeValue)
        } else if (insertPos >= this.length) {
          this.appendNode(nodeValue)
        } else {
          const newNode = new SingleLinkNode(nodeValue)
          let count = 0
          let pre = this._head
          // 从第1个节点开始后移 pos-1 次找到第 pos 个节点
          while (count < insertPos - 1) {
            count += 1
            pre = pre.next
          }
          newNode.next = pre.next
          pre.next = newNode
        }
      }

      removeNode(nodeValue) {
        let cur = this._head
        let pre = null
        while (cur !== null) {
          if (cur.value === nodeValue) {
            if (pre === null) {
              this._head = cur.next
            } else {
              pre.next = cur.next
            }
            break
          } else {
            pre = cur
            cur = cur.next
          }
        }
      }

      searchNode(nodeValue) {
        let cur = this._head
        while (cur !== null) {
          if (cur.value === nodeValue) {
            return true
          } else {
            cur = cur.next
          }
        }
        return false
      }
    }

    const s1 = new SingleLinkList()
    console.log("empty:", s1.isEmpty())
    console.log("length:", s1.length)
    s1.addNode(10)
    s1.addNode(5)
    s1.appendNode(20)
    s1.appendNode(30)
    s1.insertNode(2, 15)
    s1.insertNode(4, 25)
    s1.insertNode(6, 35)
    console.log("search5: ", s1.searchNode(5))
    s1.removeNode(5)
    s1.removeNode(15)
    s1.removeNode(25)
    s1.removeNode(35)
    console.log("search5: ", s1.searchNode(5))
    console.log("empty:", s1.isEmpty())
    console.log("length:", s1.length)
    console.log("s1:", s1);
    console.log("travel start");
    s1.travel()
    console.log("travel end");

  </script>
</body>
</html>
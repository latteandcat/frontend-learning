<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>main-top</title>
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/main-top.css">
</head>
<body>
  <div class="main-top wrapper_main">
    <div class="news-panel">
      <ul class="news-img">
        <li>
          <a href="#"><img src="./images/banner01.jpeg" alt=""></a>
        </li>
        <li>
          <a href="#"><img src="./images/banner02.jpeg" alt=""></a>
        </li>
        <li>
          <a href="#"><img src="./images/banner03.jpeg" alt=""></a>
        </li>
        <li>
          <a href="#"><img src="./images/banner04.jpeg" alt=""></a>
        </li>
        <li>
          <a href="#"><img src="./images/banner05.jpeg" alt=""></a>
        </li>
      </ul>
      <ul class="news-btn">
        <li class="active">海诺设计理念</li>
        <li>王者女子赛</li>
        <li>校园主理人</li>
        <li>英雄练习场更新</li>
        <li>虔诚人物志</li>
      </ul>
    </div>
    <div class="news-center">
      <ul class="tab">
        <li class="item active">热门</li>
        <li class="item">新闻</li>
        <li class="item">公告</li>
        <li class="item">活动</li>
        <li class="item">赛事</li>
        <li>...</li>
      </ul>
      <ul class="news-list">
        <li class="top">
          <a href="#">
            <span>7月6日全服不停机更新公告</span>
          </a>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">星梦星元皮肤名称票选结果公布</span>
          </a>
          <span class="time">06/25</span>
        </li>
        <li>
          <a href="#">
            <span class="type">热门</span>
            <span class="title">亚运电竞特许商品迎亚运倒计时100天再上新</span>
          </a>
          <span class="time">06/15</span>
        </li>
      </ul>
    </div>
    <div class="download-panel">
      <a href="#" class="download"></a>
      <a href="#" class="guard"></a>
      <a href="#" class="exper"></a>
    </div>
  </div>
  <script>

    var banner = document.querySelector('.news-panel')
    var imgs = document.querySelector(".news-img")
    var btns = document.querySelector(".news-btn")
    var activeBtn = btns.querySelector(".active")
    var curIndex = 0
    var timerId = null

    function switchBanner() {
      elem = btns.children[curIndex]
      elem.classList.add("active")
      activeBtn.classList.remove("active")
      activeBtn = elem

      imgs.style.transform = `translateX(${-604 * curIndex}px)`
      imgs.style.transition = `all 300ms ease`
      /*
        第二种实现思路（官网的实现方式）是用绝对定位实现
          左边的小于curIndex的元素全部 left: -100%;
          正在显示的等于curIndex的元素为 left: 0;
          右边的大于curIndex的元素为 left: 100%;
        但是在切换的过程中需要去除部分元素的过渡效果
        只保留要切到的元素和切之前的元素的过渡效果
      */
    }

    function startTimer() {
      timerId = setInterval(() => {
        curIndex++
        if (curIndex === btns.children.length) curIndex = 0
        switchBanner()
      }, 3000);
    }

    banner.onmouseenter = function() {
      clearInterval(timerId)
    }

    banner.onmouseleave = function() {
      startTimer()
    }

    btns.onmouseover = function(event) {
      // 找到索引的方法1：for循环
      // for (var imgIndex = 0; imgIndex < btns.children.length; imgIndex++) {
      //   if (btns.children[imgIndex] === event.target) break
      // }
      // 找到索引的方法1：findIndex
      // Array.from() 可以将可迭代对象转化为数组
      var mouseoverIndex = Array.from(btns.children).findIndex(function(item) {
        return item === event.target
      })
      curIndex = mouseoverIndex
      switchBanner()
    }

  </script>
</body>
</html>